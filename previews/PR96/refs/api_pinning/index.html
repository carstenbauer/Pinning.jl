<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API - Pinning · ThreadPinning.jl</title><meta name="title" content="API - Pinning · ThreadPinning.jl"/><meta property="og:title" content="API - Pinning · ThreadPinning.jl"/><meta property="twitter:title" content="API - Pinning · ThreadPinning.jl"/><meta name="description" content="Documentation for ThreadPinning.jl."/><meta property="og:description" content="Documentation for ThreadPinning.jl."/><meta property="twitter:description" content="Documentation for ThreadPinning.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="ThreadPinning.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ThreadPinning.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">ThreadPinning</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/ex_pinning_julia_threads/">Pinning Julia Threads</a></li><li><a class="tocitem" href="../../examples/ex_affinity/">External Affinity Mask</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3"><span class="docs-label">References</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>API - Pinning</a><ul class="internal"><li><a class="tocitem" href="#Pinning"><span>Pinning</span></a></li><li><a class="tocitem" href="#Pinning-OpenBLAS"><span>Pinning - OpenBLAS</span></a></li><li><a class="tocitem" href="#Pinning-MPI"><span>Pinning - MPI</span></a></li><li><a class="tocitem" href="#Pinning-LIKWID"><span>Pinning - LIKWID</span></a></li></ul></li><li><a class="tocitem" href="../api_querying/">API - Querying</a></li><li><a class="tocitem" href="../mkl/">MKL</a></li><li><a class="tocitem" href="../utility/">Utility</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">References</a></li><li class="is-active"><a href>API - Pinning</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API - Pinning</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/carstenbauer/ThreadPinning.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/main/docs/src/refs/api_pinning.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Pinning"><a class="docs-heading-anchor" href="#API-Pinning">API - Pinning</a><a id="API-Pinning-1"></a><a class="docs-heading-anchor-permalink" href="#API-Pinning" title="Permalink"></a></h1><h2 id="Pinning"><a class="docs-heading-anchor" href="#Pinning">Pinning</a><a id="Pinning-1"></a><a class="docs-heading-anchor-permalink" href="#Pinning" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.pinthreads" href="#ThreadPinning.pinthreads"><code>ThreadPinning.pinthreads</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">pinthreads(cpuids;
    nthreads   = nothing,
    force      = true,
    warn       = is_first_pin_attempt(),
    threadpool = :default
)</code></pre><p>Pin Julia threads to an explicit or implicit list of CPU IDs. The latter can be specified in three ways:</p><ol><li>by passing one of several predefined symbols (e.g. <code>pinthreads(:cores)</code> or <code>pinthreads(:sockets)</code>),</li><li>by providing a logical specification via helper functions (e.g. <code>pinthreads(numa(2, 1:4))</code>),</li><li>explicitly (e.g. <code>0:3</code> or <code>[0,12,4]</code>).</li></ol><p>See <code>??pinthreads</code> for more information on these variants and keyword arguments.</p><p><strong>Keyword arguments</strong></p><p>If set, the keyword argument <code>nthreads</code> serves as a cutoff, that is, the first <code>min(length(cpuids), nthreads)</code> Julia threads will get pinned.</p><p>The keyword argument <code>threadpool</code> can be used to indicate the pool of Julia threads that should be considered. Supported values are <code>:default</code> (default), <code>:interactive</code>, or <code>:all</code>. On Julia &gt;= 1.11, there is also experimental support for <code>:gc</code>.</p><p>If <code>force=false</code>, threads will only get pinned if this is the very first pin attempt (otherwise the call is a no-op). This may be particularly useful for packages that merely want to specify an (overrulable) &quot;default pinning&quot;.</p><p>The option <code>warn</code> toggles general warnings, such as unwanted interference with BLAS thread settings.</p><p><strong>Extended help</strong></p><p><strong>1) Predefined Symbols</strong></p><ul><li><code>:cputhreads</code> or <code>:compact</code>: successively pin to all available CPU-threads.</li><li><code>:cores</code>: spread threads across all available cores, only use hyperthreads if necessary.</li><li><code>:sockets</code>: spread threads across sockets (round-robin), only use hyperthreads if             necessary. Set <code>compact=true</code> to get compact pinning within each socket.</li><li><code>:numa</code>: spread threads across NUMA/memory domains (round-robin), only use hyperthreads          if necessary. Set <code>compact=true</code> to get compact pinning within each NUMA/memory          domain.</li><li><code>:random</code>: pin threads randomly to CPU-threads</li><li><code>:current</code>: pin threads to the CPU-threads they are currently running on</li><li><code>:firstn</code>: pin threads to CPU-threads in order according to there OS index.</li><li><code>:affinitymask</code>: pin threads to different CPU-threads in accordance with the process                  affinity. By default, <code>hyperthreads_last=true</code>.</li></ul><p><strong>2) Logical Specification</strong></p><p>The functions <a href="../api_querying/#ThreadPinning.node"><code>node</code></a>, <a href="../api_querying/#ThreadPinning.socket"><code>socket</code></a>, <a href="../api_querying/#ThreadPinning.numa"><code>numa</code></a>, and <a href="../api_querying/#ThreadPinning.core"><code>core</code></a> can be used to to specify CPU IDs of/within a certain domain. Moreover, the functions <a href="../api_querying/#ThreadPinning.sockets"><code>sockets</code></a> and <a href="../api_querying/#ThreadPinning.numas"><code>numas</code></a> can be used to express a round-robin scatter policy between sockets or NUMA domains, respectively.</p><p><em>Examples (domains):</em></p><ul><li><code>pinthreads(socket(1, 1:3))</code> # pin to the first 3 cores in the first socket</li><li><code>pinthreads(socket(1, 1:3; compact=true))</code> # pin to the first 3 CPU-threads in the first socket</li><li><code>pinthreads(numa(2, [2,4,6]))</code> # pin to the second, the fourth, and the sixth cores in the second NUMA/memory domain</li><li><code>pinthreads(node(ncores():-1:1))</code> # pin threads to cores in reversing order (starting at the end of the node)</li><li><code>pinthreads(sockets())</code> # scatter threads between sockets, cores before hyperthreads</li></ul><p>Different domains can be concatenated by providing them in a vector or as separate arguments to <code>pinthreads</code>.</p><p><em>Examples (concatenation):</em></p><ul><li><code>pinthreads([socket(1, 1:3), numa(2, 4:6)])</code></li><li><code>pinthreads(socket(1, 1:3), numa(2, 4:6))</code></li></ul><p><strong>3) Explicit</strong></p><p>Simply provide an <code>AbstractVector{&lt;:Integer}</code> of CPU IDs. The latter are expected to be &quot;physical&quot; OS indices (e.g. from hwloc or lscpu) that start at zero!</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/pinning.jl#L14-L92">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.pinthread" href="#ThreadPinning.pinthread"><code>ThreadPinning.pinthread</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">pinthread(cpuid::Integer; threadid = Threads.threadid())</code></pre><p>Pin the a Julia thread to the given CPU-thread.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/pinning.jl#L7-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.with_pinthreads" href="#ThreadPinning.with_pinthreads"><code>ThreadPinning.with_pinthreads</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">with_pinthreads(f::F, args...;
    soft = false,
    kwargs...
)</code></pre><p>Runs the function <code>f</code> with the specified pinning and restores the previous thread affinities afterwards. Typically to be used in combination with do-syntax.</p><p>By default (<code>soft=false</code>), before the thread affinities are restored, the Julia threads will be pinned to the CPU-threads they were running on previously.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; getcpuids()
4-element Vector{Int64}:
  7
 75
 63
  4

julia&gt; with_pinthreads(:cores) do
           getcpuids()
       end
4-element Vector{Int64}:
 0
 1
 2
 3

julia&gt; getcpuids()
4-element Vector{Int64}:
  7
 75
 63
  4</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/pinning.jl#L95-L132">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.unpinthreads" href="#ThreadPinning.unpinthreads"><code>ThreadPinning.unpinthreads</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">unpinthreads(; threadpool::Symbol = :default)</code></pre><p>Unpins all Julia threads by setting the affinity mask of all threads to all unity. Afterwards, the OS is free to move any Julia thread from one CPU thread to another.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/pinning.jl#L143-L148">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.unpinthread" href="#ThreadPinning.unpinthread"><code>ThreadPinning.unpinthread</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">unpinthread(; threadid::Integer = Threads.threadid())</code></pre><p>Unpins the given Julia thread by setting the affinity mask to all unity. Afterwards, the OS is free to move the Julia thread from one CPU thread to another.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/pinning.jl#L135-L140">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.setaffinity" href="#ThreadPinning.setaffinity"><code>ThreadPinning.setaffinity</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">setaffinity(mask; threadid = Threads.threadid())</code></pre><p>Set the affinity of a Julia thread based on the given mask (a vector of ones and zeros).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/pinning.jl#L162-L166">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.setaffinity_cpuids" href="#ThreadPinning.setaffinity_cpuids"><code>ThreadPinning.setaffinity_cpuids</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Set the affinity of a Julia thread to the given CPU-threads.</p><p><em>Examples:</em></p><ul><li><code>setaffinity(socket(1))</code> # set the affinity to the first socket</li><li><code>setaffinity(numa(2))</code> # set the affinity to the second NUMA domain</li><li><code>setaffinity(socket(1, 1:3))</code> # set the affinity to the first three cores in the first NUMA domain</li><li><code>setaffinity([1,3,5])</code> # set the affinity to the CPU-threads with the IDs 1, 3, and 5.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/pinning.jl#L151-L159">source</a></section></article><h2 id="Pinning-OpenBLAS"><a class="docs-heading-anchor" href="#Pinning-OpenBLAS">Pinning - OpenBLAS</a><a id="Pinning-OpenBLAS-1"></a><a class="docs-heading-anchor-permalink" href="#Pinning-OpenBLAS" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_pinthreads" href="#ThreadPinning.openblas_pinthreads"><code>ThreadPinning.openblas_pinthreads</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_pinthreads(cpuids; nthreads = BLAS.get_num_threads())</code></pre><p>Pin the OpenBLAS threads to the given CPU IDs. The optional keyword argument <code>nthreads</code> serves as a cutoff.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/pinning.jl#L199-L204">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_pinthread" href="#ThreadPinning.openblas_pinthread"><code>ThreadPinning.openblas_pinthread</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_pinthread(cpuid; threadid)</code></pre><p>Pin the OpenBLAS thread with the given <code>threadid</code> to the given CPU-thread (<code>cpuid</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/pinning.jl#L192-L196">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_unpinthreads" href="#ThreadPinning.openblas_unpinthreads"><code>ThreadPinning.openblas_unpinthreads</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_unpinthreads(; threadpool = :default)</code></pre><p>Unpins all OpenBLAS threads by setting their affinity masks all unity. Afterwards, the OS is free to move any OpenBLAS thread from one CPU thread to another.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/pinning.jl#L216-L221">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_unpinthread" href="#ThreadPinning.openblas_unpinthread"><code>ThreadPinning.openblas_unpinthread</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_unpinthread(; threadid)</code></pre><p>Unpins the OpenBLAS thread with the given <code>threadid</code> by setting its affinity mask to all unity. Afterwards, the OS is free to move the OpenBLAS thread from one CPU thread to another.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/pinning.jl#L207-L213">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_setaffinity" href="#ThreadPinning.openblas_setaffinity"><code>ThreadPinning.openblas_setaffinity</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_setaffinity(mask; threadid)</code></pre><p>Set the affinity of the OpenBLAS thread with the given <code>threadid</code> to the given <code>mask</code>.</p><p>The input <code>mask</code> should be one of the following:</p><ul><li>a <code>BitArray</code> to indicate the mask directly</li><li>a vector of cpuids (in which case the mask will be constructed automatically)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/pinning.jl#L170-L178">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_setaffinity_cpuids" href="#ThreadPinning.openblas_setaffinity_cpuids"><code>ThreadPinning.openblas_setaffinity_cpuids</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Set the affinity of the OpenBLAS thread to the given CPU-threads.</p><p><em>Examples:</em></p><ul><li><code>openblas_setaffinity_cpuids(socket(1))</code> # set the affinity to the first socket</li><li><code>openblas_setaffinity_cpuids(numa(2))</code> # set the affinity to the second NUMA domain</li><li><code>openblas_setaffinity_cpuids(socket(1, 1:3))</code> # set the affinity to the first three cores in the first NUMA domain</li><li><code>openblas_setaffinity_cpuids([1,3,5])</code> # set the affinity to the CPU-threads with the IDs 1, 3, and 5.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/pinning.jl#L181-L189">source</a></section></article><h2 id="Pinning-MPI"><a class="docs-heading-anchor" href="#Pinning-MPI">Pinning - MPI</a><a id="Pinning-MPI-1"></a><a class="docs-heading-anchor-permalink" href="#Pinning-MPI" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.pinthreads_mpi" href="#ThreadPinning.pinthreads_mpi"><code>ThreadPinning.pinthreads_mpi</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">pinthreads_mpi(symbol, rank, nranks; nthreads_per_rank, compact, kwargs...)</code></pre><p>Pin MPI ranks, that is, their respective Julia thread(s), to (subsets of) domains (e.g. sockets or memory domains). Specifically, when calling this function on all MPI ranks, the latter will be distributed in a round-robin fashion among the specified domains such that their Julia threads are pinned to non-overlapping ranges of CPU-threads within the domain.</p><p>Valid options for <code>symbol</code> are <code>:sockets</code> and <code>:numa</code>.</p><p>If <code>compact=false</code> (default), physical cores are occupied before hyperthreads. Otherwise, CPU-cores - with potentially multiple CPU-threads - are filled up one after another (compact pinning).</p><p>The keyword argument <code>nthreads_per_rank</code> (default <code>Threads.nthreads()</code>) can be used to pin only a subset of the available Julia threads per MPI rank.</p><p><strong>Note:</strong> As per usual for MPI, <code>rank</code> starts at zero.</p><p><em>Example:</em></p><pre><code class="nohighlight hljs">using ThreadPinning
using MPI
comm = MPI.COMM_WORLD
nranks = MPI.Comm_size(comm)
rank = MPI.Comm_rank(comm)
pinthreads_mpi(:sockets, rank, nranks)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/mpi.jl#L1-L32">source</a></section></article><h2 id="Pinning-LIKWID"><a class="docs-heading-anchor" href="#Pinning-LIKWID">Pinning - LIKWID</a><a id="Pinning-LIKWID-1"></a><a class="docs-heading-anchor-permalink" href="#Pinning-LIKWID" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.pinthreads_likwidpin" href="#ThreadPinning.pinthreads_likwidpin"><code>ThreadPinning.pinthreads_likwidpin</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">pinthreads_likwidpin(str::AbstractString; onebased = false)</code></pre><p>Pins Julia threads to CPU-threads based on the given <code>likwid-pin</code> compatible string. Checkout the <a href="https://github.com/RRZE-HPC/likwid/wiki/Likwid-Pin">LIKWID documentation</a> for more information.</p><p>If the keyword argument <code>onebased</code> is set to <code>true</code>, logical indices as well as domain indices start at one instead of zero (likwid-pin default). Note, though, that this doesn&#39;t affect the explicit pinning mode where &quot;physical&quot; CPU IDs always start at zero.</p><p><strong>Examples</strong></p><ul><li><code>pinthreads_likwidpin(&quot;S0:0-3&quot;)</code></li><li><code>pinthreads_likwidpin(&quot;M1:0,2,4&quot;)</code></li><li><code>pinthreads_likwidpin(&quot;S:scatter&quot;)</code></li><li><code>pinthreads_likwidpin(&quot;E:N:4:1:2&quot;)</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/likwid-pin.jl#L1-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.likwidpin_to_cpuids" href="#ThreadPinning.likwidpin_to_cpuids"><code>ThreadPinning.likwidpin_to_cpuids</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">likwidpin_to_cpuids(lpstr::AbstractString; onebased = false)</code></pre><p>Convert the given likwid-pin compatible string into a CPU ID list. See <a href="#ThreadPinning.pinthreads_likwidpin"><code>pinthreads_likwidpin</code></a> for more information.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/likwid-pin.jl#L20-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.likwidpin_domains" href="#ThreadPinning.likwidpin_domains"><code>ThreadPinning.likwidpin_domains</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">likwidpin_domains(; onebased = false)</code></pre><p>The likwid-pin compatible domains that are available for the system.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/268fc1dff96b77a0d82466fe5a83101ba7830d72/src/likwid-pin.jl#L28-L32">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../examples/ex_affinity/">« External Affinity Mask</a><a class="docs-footer-nextpage" href="../api_querying/">API - Querying »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Thursday 1 August 2024 06:22">Thursday 1 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
