<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · ThreadPinning.jl</title><meta name="title" content="API · ThreadPinning.jl"/><meta property="og:title" content="API · ThreadPinning.jl"/><meta property="twitter:title" content="API · ThreadPinning.jl"/><meta name="description" content="Documentation for ThreadPinning.jl."/><meta property="og:description" content="Documentation for ThreadPinning.jl."/><meta property="twitter:description" content="Documentation for ThreadPinning.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="ThreadPinning.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ThreadPinning.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">ThreadPinning</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">References</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#References-Pinning"><span>References - Pinning</span></a></li><li><a class="tocitem" href="#References-Querying"><span>References - Querying</span></a></li></ul></li><li><a class="tocitem" href="../blaslapack/">BLAS/LAPACK</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">References</a></li><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/carstenbauer/ThreadPinning.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/main/docs/src/refs/api.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#ThreadPinning.core"><code>ThreadPinning.core</code></a></li><li><a href="#ThreadPinning.cores"><code>ThreadPinning.cores</code></a></li><li><a href="#ThreadPinning.cpuid"><code>ThreadPinning.cpuid</code></a></li><li><a href="#ThreadPinning.cpuids"><code>ThreadPinning.cpuids</code></a></li><li><a href="#ThreadPinning.getaffinity"><code>ThreadPinning.getaffinity</code></a></li><li><a href="#ThreadPinning.getcpuid"><code>ThreadPinning.getcpuid</code></a></li><li><a href="#ThreadPinning.getcpuids"><code>ThreadPinning.getcpuids</code></a></li><li><a href="#ThreadPinning.getnumanode"><code>ThreadPinning.getnumanode</code></a></li><li><a href="#ThreadPinning.getnumanodes"><code>ThreadPinning.getnumanodes</code></a></li><li><a href="#ThreadPinning.hyperthreading_is_enabled"><code>ThreadPinning.hyperthreading_is_enabled</code></a></li><li><a href="#ThreadPinning.id"><code>ThreadPinning.id</code></a></li><li><a href="#ThreadPinning.isefficiencycore"><code>ThreadPinning.isefficiencycore</code></a></li><li><a href="#ThreadPinning.ishyperthread"><code>ThreadPinning.ishyperthread</code></a></li><li><a href="#ThreadPinning.ispinned"><code>ThreadPinning.ispinned</code></a></li><li><a href="#ThreadPinning.ncorekinds"><code>ThreadPinning.ncorekinds</code></a></li><li><a href="#ThreadPinning.ncores"><code>ThreadPinning.ncores</code></a></li><li><a href="#ThreadPinning.ncputhreads"><code>ThreadPinning.ncputhreads</code></a></li><li><a href="#ThreadPinning.nnuma"><code>ThreadPinning.nnuma</code></a></li><li><a href="#ThreadPinning.node"><code>ThreadPinning.node</code></a></li><li><a href="#ThreadPinning.nsmt"><code>ThreadPinning.nsmt</code></a></li><li><a href="#ThreadPinning.nsockets"><code>ThreadPinning.nsockets</code></a></li><li><a href="#ThreadPinning.numa"><code>ThreadPinning.numa</code></a></li><li><a href="#ThreadPinning.numas"><code>ThreadPinning.numas</code></a></li><li><a href="#ThreadPinning.openblas_getaffinity"><code>ThreadPinning.openblas_getaffinity</code></a></li><li><a href="#ThreadPinning.openblas_getcpuid"><code>ThreadPinning.openblas_getcpuid</code></a></li><li><a href="#ThreadPinning.openblas_getcpuids"><code>ThreadPinning.openblas_getcpuids</code></a></li><li><a href="#ThreadPinning.openblas_ispinned"><code>ThreadPinning.openblas_ispinned</code></a></li><li><a href="#ThreadPinning.openblas_pinthread"><code>ThreadPinning.openblas_pinthread</code></a></li><li><a href="#ThreadPinning.openblas_pinthreads"><code>ThreadPinning.openblas_pinthreads</code></a></li><li><a href="#ThreadPinning.openblas_printaffinities"><code>ThreadPinning.openblas_printaffinities</code></a></li><li><a href="#ThreadPinning.openblas_printaffinity"><code>ThreadPinning.openblas_printaffinity</code></a></li><li><a href="#ThreadPinning.openblas_setaffinity"><code>ThreadPinning.openblas_setaffinity</code></a></li><li><a href="#ThreadPinning.openblas_setaffinity_cpuids"><code>ThreadPinning.openblas_setaffinity_cpuids</code></a></li><li><a href="#ThreadPinning.openblas_unpinthread"><code>ThreadPinning.openblas_unpinthread</code></a></li><li><a href="#ThreadPinning.openblas_unpinthreads"><code>ThreadPinning.openblas_unpinthreads</code></a></li><li><a href="#ThreadPinning.pinthread"><code>ThreadPinning.pinthread</code></a></li><li><a href="#ThreadPinning.pinthreads"><code>ThreadPinning.pinthreads</code></a></li><li><a href="#ThreadPinning.pinthreads_mpi"><code>ThreadPinning.pinthreads_mpi</code></a></li><li><a href="#ThreadPinning.printaffinities"><code>ThreadPinning.printaffinities</code></a></li><li><a href="#ThreadPinning.printaffinity"><code>ThreadPinning.printaffinity</code></a></li><li><a href="#ThreadPinning.setaffinity"><code>ThreadPinning.setaffinity</code></a></li><li><a href="#ThreadPinning.setaffinity_cpuids"><code>ThreadPinning.setaffinity_cpuids</code></a></li><li><a href="#ThreadPinning.socket"><code>ThreadPinning.socket</code></a></li><li><a href="#ThreadPinning.sockets"><code>ThreadPinning.sockets</code></a></li><li><a href="#ThreadPinning.threadinfo"><code>ThreadPinning.threadinfo</code></a></li><li><a href="#ThreadPinning.unpinthread"><code>ThreadPinning.unpinthread</code></a></li><li><a href="#ThreadPinning.unpinthreads"><code>ThreadPinning.unpinthreads</code></a></li><li><a href="#ThreadPinning.visualize_affinity"><code>ThreadPinning.visualize_affinity</code></a></li><li><a href="#ThreadPinning.with_pinthreads"><code>ThreadPinning.with_pinthreads</code></a></li></ul><h2 id="References-Pinning"><a class="docs-heading-anchor" href="#References-Pinning">References - Pinning</a><a id="References-Pinning-1"></a><a class="docs-heading-anchor-permalink" href="#References-Pinning" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_pinthread" href="#ThreadPinning.openblas_pinthread"><code>ThreadPinning.openblas_pinthread</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_pinthread(cpuid; threadid)</code></pre><p>Pin the OpenBLAS thread with the given <code>threadid</code> to the given CPU-thread (<code>cpuid</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/pinning.jl#L192-L196">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_pinthreads" href="#ThreadPinning.openblas_pinthreads"><code>ThreadPinning.openblas_pinthreads</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_pinthreads(cpuids; nthreads = BLAS.get_num_threads())</code></pre><p>Pin the OpenBLAS threads to the given CPU IDs. The optional keyword argument <code>nthreads</code> serves as a cutoff.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/pinning.jl#L199-L204">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_setaffinity" href="#ThreadPinning.openblas_setaffinity"><code>ThreadPinning.openblas_setaffinity</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_setaffinity(mask; threadid)</code></pre><p>Set the affinity of the OpenBLAS thread with the given <code>threadid</code> to the given <code>mask</code>.</p><p>The input <code>mask</code> should be one of the following:</p><ul><li>a <code>BitArray</code> to indicate the mask directly</li><li>a vector of cpuids (in which case the mask will be constructed automatically)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/pinning.jl#L170-L178">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_setaffinity_cpuids" href="#ThreadPinning.openblas_setaffinity_cpuids"><code>ThreadPinning.openblas_setaffinity_cpuids</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Set the affinity of the OpenBLAS thread to the given CPU-threads.</p><p><em>Examples:</em></p><ul><li><code>openblas_setaffinity_cpuids(socket(1))</code> # set the affinity to the first socket</li><li><code>openblas_setaffinity_cpuids(numa(2))</code> # set the affinity to the second NUMA domain</li><li><code>openblas_setaffinity_cpuids(socket(1, 1:3))</code> # set the affinity to the first three cores in the first NUMA domain</li><li><code>openblas_setaffinity_cpuids([1,3,5])</code> # set the affinity to the CPU-threads with the IDs 1, 3, and 5.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/pinning.jl#L181-L189">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_unpinthread" href="#ThreadPinning.openblas_unpinthread"><code>ThreadPinning.openblas_unpinthread</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_unpinthread(; threadid)</code></pre><p>Unpins the OpenBLAS thread with the given <code>threadid</code> by setting its affinity mask to all unity. Afterwards, the OS is free to move the OpenBLAS thread from one CPU thread to another.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/pinning.jl#L207-L213">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_unpinthreads" href="#ThreadPinning.openblas_unpinthreads"><code>ThreadPinning.openblas_unpinthreads</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_unpinthreads(; threadpool = :default)</code></pre><p>Unpins all OpenBLAS threads by setting their affinity masks all unity. Afterwards, the OS is free to move any OpenBLAS thread from one CPU thread to another.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/pinning.jl#L216-L221">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.pinthread" href="#ThreadPinning.pinthread"><code>ThreadPinning.pinthread</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">pinthread(cpuid::Integer; threadid = Threads.threadid())</code></pre><p>Pin the a Julia thread to the given CPU-thread.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/pinning.jl#L7-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.pinthreads" href="#ThreadPinning.pinthreads"><code>ThreadPinning.pinthreads</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">pinthreads(cpuids;
    nthreads   = nothing,
    force      = true,
    warn       = is_first_pin_attempt(),
    threadpool = :default
)</code></pre><p>Pin Julia threads to an explicit or implicit list of CPU IDs. The latter can be specified in three ways:</p><ol><li>by passing one of several predefined symbols (e.g. <code>pinthreads(:cores)</code> or <code>pinthreads(:sockets)</code>),</li><li>by providing a logical specification via helper functions (e.g. <code>pinthreads(numa(2, 1:4))</code>),</li><li>explicitly (e.g. <code>0:3</code> or <code>[0,12,4]</code>).</li></ol><p>See <code>??pinthreads</code> for more information on these variants and keyword arguments.</p><p><strong>Keyword arguments</strong></p><p>If set, the keyword argument <code>nthreads</code> serves as a cutoff, that is, the first <code>min(length(cpuids), nthreads)</code> Julia threads will get pinned.</p><p>The keyword argument <code>threadpool</code> can be used to indicate the pool of Julia threads that should be considered. Supported values are <code>:default</code> (default), <code>:interactive</code>, or <code>:all</code>. On Julia &gt;= 1.11, there is also experimental support for <code>:gc</code>.</p><p>If <code>force=false</code>, threads will only get pinned if this is the very first pin attempt (otherwise the call is a no-op). This may be particularly useful for packages that merely want to specify an (overrulable) &quot;default pinning&quot;.</p><p>The option <code>warn</code> toggles general warnings, such as unwanted interference with BLAS thread settings.</p><p><strong>Extended help</strong></p><p><strong>1) Predefined Symbols</strong></p><ul><li><code>:cputhreads</code> or <code>:compact</code>: successively pin to all available CPU-threads.</li><li><code>:cores</code>: spread threads across all available cores, only use hyperthreads if necessary.</li><li><code>:sockets</code>: spread threads across sockets (round-robin), only use hyperthreads if             necessary. Set <code>compact=true</code> to get compact pinning within each socket.</li><li><code>:numa</code>: spread threads across NUMA/memory domains (round-robin), only use hyperthreads          if necessary. Set <code>compact=true</code> to get compact pinning within each NUMA/memory          domain.</li><li><code>:random</code>: pin threads randomly to CPU-threads</li><li><code>:current</code>: pin threads to the CPU-threads they are currently running on</li><li><code>:firstn</code>: pin threads to CPU-threads in order according to there OS index.</li><li><code>:affinitymask</code>: pin threads to different CPU-threads in accordance with the process                  affinity. By default, <code>hyperthreads_last=true</code>.</li></ul><p><strong>2) Logical Specification</strong></p><p>The functions <a href="#ThreadPinning.node"><code>node</code></a>, <a href="#ThreadPinning.socket"><code>socket</code></a>, <a href="#ThreadPinning.numa"><code>numa</code></a>, and <a href="#ThreadPinning.core"><code>core</code></a> can be used to to specify CPU IDs of/within a certain domain. Moreover, the functions <a href="#ThreadPinning.sockets"><code>sockets</code></a> and <a href="#ThreadPinning.numas"><code>numas</code></a> can be used to express a round-robin scatter policy between sockets or NUMA domains, respectively.</p><p><em>Examples (domains):</em></p><ul><li><code>pinthreads(socket(1, 1:3))</code> # pin to the first 3 cores in the first socket</li><li><code>pinthreads(socket(1, 1:3; compact=true))</code> # pin to the first 3 CPU-threads in the first socket</li><li><code>pinthreads(numa(2, [2,4,6]))</code> # pin to the second, the fourth, and the sixth cores in the second NUMA/memory domain</li><li><code>pinthreads(node(ncores():-1:1))</code> # pin threads to cores in reversing order (starting at the end of the node)</li><li><code>pinthreads(sockets())</code> # scatter threads between sockets, cores before hyperthreads</li></ul><p>Different domains can be concatenated by providing them in a vector or as separate arguments to <code>pinthreads</code>.</p><p><em>Examples (concatenation):</em></p><ul><li><code>pinthreads([socket(1, 1:3), numa(2, 4:6)])</code></li><li><code>pinthreads(socket(1, 1:3), numa(2, 4:6))</code></li></ul><p><strong>3) Explicit</strong></p><p>Simply provide an <code>AbstractVector{&lt;:Integer}</code> of CPU IDs. The latter are expected to be &quot;physical&quot; OS indices (e.g. from hwloc or lscpu) that start at zero!</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/pinning.jl#L14-L92">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.setaffinity" href="#ThreadPinning.setaffinity"><code>ThreadPinning.setaffinity</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">setaffinity(mask; threadid = Threads.threadid())</code></pre><p>Set the affinity of a Julia thread based on the given mask (a vector of ones and zeros).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/pinning.jl#L162-L166">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.setaffinity_cpuids" href="#ThreadPinning.setaffinity_cpuids"><code>ThreadPinning.setaffinity_cpuids</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Set the affinity of a Julia thread to the given CPU-threads.</p><p><em>Examples:</em></p><ul><li><code>setaffinity(socket(1))</code> # set the affinity to the first socket</li><li><code>setaffinity(numa(2))</code> # set the affinity to the second NUMA domain</li><li><code>setaffinity(socket(1, 1:3))</code> # set the affinity to the first three cores in the first NUMA domain</li><li><code>setaffinity([1,3,5])</code> # set the affinity to the CPU-threads with the IDs 1, 3, and 5.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/pinning.jl#L151-L159">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.unpinthread" href="#ThreadPinning.unpinthread"><code>ThreadPinning.unpinthread</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">unpinthread(; threadid::Integer = Threads.threadid())</code></pre><p>Unpins the given Julia thread by setting the affinity mask to all unity. Afterwards, the OS is free to move the Julia thread from one CPU thread to another.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/pinning.jl#L135-L140">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.unpinthreads" href="#ThreadPinning.unpinthreads"><code>ThreadPinning.unpinthreads</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">unpinthreads(; threadpool::Symbol = :default)</code></pre><p>Unpins all Julia threads by setting the affinity mask of all threads to all unity. Afterwards, the OS is free to move any Julia thread from one CPU thread to another.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/pinning.jl#L143-L148">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.with_pinthreads" href="#ThreadPinning.with_pinthreads"><code>ThreadPinning.with_pinthreads</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">with_pinthreads(f::F, args...;
    soft = false,
    kwargs...
)</code></pre><p>Runs the function <code>f</code> with the specified pinning and restores the previous thread affinities afterwards. Typically to be used in combination with do-syntax.</p><p>By default (<code>soft=false</code>), before the thread affinities are restored, the Julia threads will be pinned to the CPU-threads they were running on previously.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; getcpuids()
4-element Vector{Int64}:
  7
 75
 63
  4

julia&gt; with_pinthreads(:cores) do
           getcpuids()
       end
4-element Vector{Int64}:
 0
 1
 2
 3

julia&gt; getcpuids()
4-element Vector{Int64}:
  7
 75
 63
  4</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/pinning.jl#L95-L132">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.pinthreads_mpi" href="#ThreadPinning.pinthreads_mpi"><code>ThreadPinning.pinthreads_mpi</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">pinthreads_mpi(symbol, rank, nranks; nthreads_per_rank, compact, kwargs...)</code></pre><p>Pin MPI ranks, that is, their respective Julia thread(s), to (subsets of) domains (e.g. sockets or memory domains). Specifically, when calling this function on all MPI ranks, the latter will be distributed in a round-robin fashion among the specified domains such that their Julia threads are pinned to non-overlapping ranges of CPU-threads within the domain.</p><p>Valid options for <code>symbol</code> are <code>:sockets</code> and <code>:numa</code>.</p><p>If <code>compact=false</code> (default), physical cores are occupied before hyperthreads. Otherwise, CPU-cores - with potentially multiple CPU-threads - are filled up one after another (compact pinning).</p><p>The keyword argument <code>nthreads_per_rank</code> (default <code>Threads.nthreads()</code>) can be used to pin only a subset of the available Julia threads per MPI rank.</p><p><strong>Note:</strong> As per usual for MPI, <code>rank</code> starts at zero.</p><p><em>Example:</em></p><pre><code class="nohighlight hljs">using ThreadPinning
using MPI
comm = MPI.COMM_WORLD
nranks = MPI.Comm_size(comm)
rank = MPI.Comm_rank(comm)
pinthreads_mpi(:sockets, rank, nranks)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/mpi.jl#L1-L32">source</a></section></article><h2 id="References-Querying"><a class="docs-heading-anchor" href="#References-Querying">References - Querying</a><a id="References-Querying-1"></a><a class="docs-heading-anchor-permalink" href="#References-Querying" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.core" href="#ThreadPinning.core"><code>ThreadPinning.core</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns the CPU IDs that belong to core <code>i</code> (logical index, starts at 1). Set <code>shuffle=true</code> to randomize.</p><p>Optional second argument: Logical indices to select a subset of the CPU-threads.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L56-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.cores" href="#ThreadPinning.cores"><code>ThreadPinning.cores</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns the CPU IDs of the system as obtained by a round-robin scattering between CPU cores. This is the same as <code>nodes(; compact=false)</code>. Set <code>shuffle=true</code> to randomize.</p><p>Optional first argument: Logical indices to select a subset of the sockets.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L91-L97">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.cpuid" href="#ThreadPinning.cpuid"><code>ThreadPinning.cpuid</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns the CPU ID (&quot;physical&quot; OS index) that corresponds to the given logical index (starts at 1).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L201-L204">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.cpuids" href="#ThreadPinning.cpuids"><code>ThreadPinning.cpuids</code></a> — <span class="docstring-category">Function</span></header><section><div><p>All valid CPU IDs of the system (sorted).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L190-L192">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.getaffinity" href="#ThreadPinning.getaffinity"><code>ThreadPinning.getaffinity</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getaffinity(; threadid = Threads.threadid(), cutoff = cpuidlimit())</code></pre><p>Get the thread affinity of a Julia thread. Returns the affinity mask as a vector of zeros and ones. By default, the mask is cut off at <code>Sys.CPU_THREADS</code>. This can be tuned via the <code>cutoff</code> keyword argument (<code>nothing</code> means no cutoff).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L26-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.getcpuid" href="#ThreadPinning.getcpuid"><code>ThreadPinning.getcpuid</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getcpuid(; threadid = nothing)</code></pre><p>Returns the ID of the CPU thread on which a Julia thread is currently running.</p><p>If <code>threadid=nothing</code> (default), we query the id directly from the calling thread.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L7-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.getcpuids" href="#ThreadPinning.getcpuids"><code>ThreadPinning.getcpuids</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getcpuids(; threadpool = :default)</code></pre><p>Returns the IDs of the CPU-threads on which the Julia threads are currently running on.</p><p>The keyword argument <code>threadpool</code> (default: <code>:default</code>) may be used to specify a specific thread pool.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L16-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.getnumanode" href="#ThreadPinning.getnumanode"><code>ThreadPinning.getnumanode</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getnumanode(; threadid = nothing)</code></pre><p>Returns the ID (starting at zero) of the NUMA node corresponding to the CPU thread on which the calling thread is currently running. A <code>threadid</code> may be provided to consider a Julia thread that is different from the calling one.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L36-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.getnumanodes" href="#ThreadPinning.getnumanodes"><code>ThreadPinning.getnumanodes</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getnumanodes(; threadpool = :default)</code></pre><p>Returns the IDs (starting at zero) of the NUMA nodes corresponding to the CPU threads on which the Julia threads are currently running.</p><p>The keyword argument <code>threadpool</code> (default: <code>:default</code>) may be used to consider only those Julia threads that belong to a specific thread pool.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L45-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.hyperthreading_is_enabled" href="#ThreadPinning.hyperthreading_is_enabled"><code>ThreadPinning.hyperthreading_is_enabled</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Check whether simultaneous multithreading (SMT) / &quot;hyperthreading&quot; is enabled.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L151-L153">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.id" href="#ThreadPinning.id"><code>ThreadPinning.id</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns the logical index (starts at 1) that corresponds to the given CPU ID (&quot;physical&quot; OS index).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L195-L198">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.isefficiencycore" href="#ThreadPinning.isefficiencycore"><code>ThreadPinning.isefficiencycore</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns true if the given CPU-thread lies inside of a CPU-core that has the highest power efficiency of all the CPU-cores (i.e. an efficiency value of 1). If there is only a single CPU-core kind, the return value is false for all CPU IDs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L162-L166">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.ishyperthread" href="#ThreadPinning.ishyperthread"><code>ThreadPinning.ishyperthread</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Check whether the given CPU-thread is a SMT-thread / &quot;hyperthread&quot; (i.e. it is not the first CPU-thread in the CPU-core).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L156-L159">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.ispinned" href="#ThreadPinning.ispinned"><code>ThreadPinning.ispinned</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">ispinned(; threadid = Threads.threadid())</code></pre><p>Returns <code>true</code> if the thread is pinned, that is, if it has an affinity mask that highlights a single CPU-thread.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L143-L148">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.ncorekinds" href="#ThreadPinning.ncorekinds"><code>ThreadPinning.ncorekinds</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Number of different kinds of cores (e.g. efficiency and performance cores).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L181">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.ncores" href="#ThreadPinning.ncores"><code>ThreadPinning.ncores</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Number of cores (i.e. excluding hyperthreads)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L172">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.ncputhreads" href="#ThreadPinning.ncputhreads"><code>ThreadPinning.ncputhreads</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Number of CPU-threads</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L169">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.nnuma" href="#ThreadPinning.nnuma"><code>ThreadPinning.nnuma</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Number of NUMA nodes</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L175">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.node" href="#ThreadPinning.node"><code>ThreadPinning.node</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns all CPU IDs of the system/compute node (logical index, starts at 1). By default, an &quot;cores before hyperthreads&quot; ordering is used. Set <code>compact=true</code> if you want compact ordering. Set <code>shuffle=true</code> to randomize.</p><p>Optional second argument: Logical indices to select a subset of the CPU-threads.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L82-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.nsmt" href="#ThreadPinning.nsmt"><code>ThreadPinning.nsmt</code></a> — <span class="docstring-category">Function</span></header><section><div><p>The number of SMT-threads in a core. If this number varies between different cores, the maximum is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L184-L187">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.nsockets" href="#ThreadPinning.nsockets"><code>ThreadPinning.nsockets</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Number of CPU-sockets / CPUs</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L178">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.numa" href="#ThreadPinning.numa"><code>ThreadPinning.numa</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns the CPU IDs that belong to the <code>i</code>th NUMA domain (logical index, starts at 1). By default, an &quot;cores before hyperthreads&quot; ordering is used. Set <code>compact=true</code> if you want compact ordering. Set <code>shuffle=true</code> to randomize.</p><p>Optional second argument: Logical indices to select a subset of the CPU-threads.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L64-L70">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.numas" href="#ThreadPinning.numas"><code>ThreadPinning.numas</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns the CPU IDs of the system as obtained by a round-robin scattering between NUMA domains. Within each NUMA domain, a round-robin ordering among CPU cores is used (&quot;cores before hyperthreads&quot;). Provide <code>compact=true</code> to get compact ordering within each NUMA domain. Set <code>shuffle=true</code> to randomize.</p><p>Optional first argument: Logical indices to select a subset of the sockets.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L110-L117">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_getaffinity" href="#ThreadPinning.openblas_getaffinity"><code>ThreadPinning.openblas_getaffinity</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_getaffinity(; threadid, convert = true)</code></pre><p>Query the affinity of the OpenBLAS thread with the given <code>threadid</code> (typically <code>1:BLAS.get_num_threads()</code>). By default, returns a vector respresenting the mask. If <code>convert=false</code> a <code>Ccpu_set_t</code> is returned instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L208-L215">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_getcpuid" href="#ThreadPinning.openblas_getcpuid"><code>ThreadPinning.openblas_getcpuid</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_getcpuid(; threadid)</code></pre><p>Get the id of the CPU thread on which the OpenBLAS thread with the given <code>threadid</code> is running on <strong>according to its affinity</strong>.</p><p><strong>Note:</strong> If the OpenBLAS thread has not been pinned before, this function will error because the affinity mask highlights more than a single CPU thread by default.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L218-L226">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_getcpuids" href="#ThreadPinning.openblas_getcpuids"><code>ThreadPinning.openblas_getcpuids</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_getcpuids()</code></pre><p>Get the ids of the CPU threads on which the OpenBLAS threads are running on <strong>according to their affinity</strong>. See <a href="#ThreadPinning.openblas_getcpuid"><code>openblas_getcpuid</code></a> for more information.&quot;</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L229-L234">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_ispinned" href="#ThreadPinning.openblas_ispinned"><code>ThreadPinning.openblas_ispinned</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_ispinned(; threadid)</code></pre><p>Check if the OpenBLAS thread is pinned to a single CPU thread.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L237-L241">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_printaffinities" href="#ThreadPinning.openblas_printaffinities"><code>ThreadPinning.openblas_printaffinities</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Print the affinities of all OpenBLAS threads.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L251">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.openblas_printaffinity" href="#ThreadPinning.openblas_printaffinity"><code>ThreadPinning.openblas_printaffinity</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">openblas_printaffinity(; threadid)</code></pre><p>Print the affinity of an OpenBLAS thread.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L244-L248">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.printaffinities" href="#ThreadPinning.printaffinities"><code>ThreadPinning.printaffinities</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">printaffinities(; threadpool = :default, kwargs...)</code></pre><p>Print the affinity masks of all Julia threads. See <a href="#ThreadPinning.printaffinity"><code>printaffinity</code></a> for options.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L130-L134">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.printaffinity" href="#ThreadPinning.printaffinity"><code>ThreadPinning.printaffinity</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">printaffinity(; threadid::Integer = Threads.threadid())</code></pre><p>Print the affinity mask of the Julia thread.</p><p>The keyword argument <code>groupby</code> may be used to change how CPU-threads are grouped visually. It defaults to <code>groupby=:socket</code>. Other valid values are <code>:numa</code> and <code>:core</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L120-L127">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.socket" href="#ThreadPinning.socket"><code>ThreadPinning.socket</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns the CPU IDs that belong to the <code>i</code>th CPU/socket (logical index, starts at 1). By default, an &quot;cores before hyperthreads&quot; ordering is used. Set <code>compact=true</code> if you want compact ordering. Set <code>shuffle=true</code> to randomize.</p><p>Optional second argument: Logical indices to select a subset of the CPU-threads.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L73-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.sockets" href="#ThreadPinning.sockets"><code>ThreadPinning.sockets</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns the CPU IDs of the system as obtained by a round-robin scattering between sockets. By default, within each socket, a round-robin ordering among CPU cores is used (&quot;cores before hyperthreads&quot;). Provide <code>compact=true</code> to get compact ordering within each socket. Set <code>shuffle=true</code> to randomize.</p><p>Optional first argument: Logical indices to select a subset of the sockets.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L100-L107">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.visualize_affinity" href="#ThreadPinning.visualize_affinity"><code>ThreadPinning.visualize_affinity</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Visualize the affinity mask of a Julia thread. Many of the keyword options of <code>threadinfo</code> work here as well.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/querying.jl#L137-L140">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ThreadPinning.threadinfo" href="#ThreadPinning.threadinfo"><code>ThreadPinning.threadinfo</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">threadinfo(;
    groupby = :sockets,
    threadpool = :default,
    blas = false,
    slurm = false,
    hints = false,
    compact = true,
    hyperthreads = SysInfo.hyperthreading_is_enabled(),
    efficiency = SysInfo.ncorekinds() &gt; 1,
    masks = false,
    coregaps = false,
    logical = false,
    color = true,
    blocksize = choose_blocksize()
)</code></pre><p>Print information about Julia threads, e.g. on which CPU-threads (i.e. cores if hyperthreading is disabled) they are running.</p><p><strong>Keyword arguments</strong></p><ul><li><code>groupby</code>: Options are <code>:sockets</code>, <code>:numa</code>, <code>:cores</code>, or <code>:none</code>.</li><li><code>threadpool</code>: Only consider Julia threads in the given thread pool.                                 Supported values are <code>:default</code>, <code>:interactive</code>, and                                 <code>:all</code>.</li><li><code>blas</code>: Visualize BLAS threads instead of Julia threads.</li><li><code>slurm</code>: Only show the part of the system that is covered by the active SLURM allocation.</li><li><code>hints</code>: Give some hints about how to improve the threading related settings.</li><li><code>compact</code>: Toggle between compact and &quot;cores before hyperthreads&quot; ordering.</li><li><code>hyperthreads</code>: If <code>true</code>, we (try to) highlight CPU-threads that aren&#39;t the first threads within a CPU-core.</li><li><code>efficiency</code>: If <code>true</code>, we highlight (underline) CPU-threads that belong to efficiency cores.</li><li><code>masks</code>: Show the affinity masks of all Julia threads.</li><li><code>coregaps</code>: Put an extra space (&quot;gap&quot;) between different CPU-cores, when printing.</li><li><code>logical</code>: Toggle between logical and &quot;physical&quot; CPU-thread indices.</li><li><code>color</code>: Toggle between colored and black-and-white output.</li><li><code>blocksize</code>: Wrap to a new line after <code>blocksize</code> many CPU-threads.  May also be set to <code>:numa</code> in which case the line break will occur after each numa domain.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/carstenbauer/ThreadPinning.jl/blob/ada56e34d0701b84e2ef0a70f7b4307fcca3ae61/src/threadinfo.jl#L7-L47">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« ThreadPinning</a><a class="docs-footer-nextpage" href="../blaslapack/">BLAS/LAPACK »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Thursday 1 August 2024 05:28">Thursday 1 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
